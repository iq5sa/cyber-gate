<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cyber Incident & Software Error Report</title>

    <!-- Bootstrap 5.1.3 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .required::after { content: " *"; color: #d9534f; }
        .form-section { border: 1px solid #e9ecef; padding: 1rem; border-radius: .5rem; margin-bottom: 1rem; }
    </style>
</head>
<body>
<div class="container py-5">
    <h1 class="mb-4">Cyber Incident & Software Error Report</h1>

    <form id="reportForm" action="/submit-report" method="POST" enctype="multipart/form-data" novalidate>

        <!-- Reporter Information -->
        <div class="form-section">
            <h5>Reporter Information</h5>
            <div class="row g-3">
                <div class="col-md-6">
                    <label for="fullName" class="form-label">Full Name</label>
                    <input type="text" class="form-control" id="fullName" name="fullName" placeholder="Optional">
                </div>
                <div class="col-md-6">
                    <label for="email" class="form-label required">Email address</label>
                    <input type="email" class="form-control" id="email" name="email" placeholder="you@example.com" required>
                    <div class="invalid-feedback">Please provide a valid email for follow-up.</div>
                </div>
                <div class="col-md-4">
                    <label for="phone" class="form-label">Phone</label>
                    <input type="tel" class="form-control" id="phone" name="phone" placeholder="Optional">
                </div>
                <div class="col-md-4">
                    <label for="role" class="form-label">Role</label>
                    <select id="role" name="role" class="form-select">
                        <option value="Client">Client</option>
                        <option value="Employee">Employee</option>
                        <option value="Vendor">Vendor</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="col-md-4 d-flex align-items-end">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="anonymous" name="anonymous">
                        <label class="form-check-label" for="anonymous">Submit anonymously</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Incident / Issue Type -->
        <div class="form-section">
            <h5>Incident / Issue</h5>

            <div class="row g-3">
                <div class="col-md-6">
                    <label for="category" class="form-label required">Category</label>
                    <select id="category" name="category" class="form-select" required>
                        <option value="">Choose...</option>
                        <option>Security Incident</option>
                        <option>Malware / Suspicious File</option>
                        <option>Phishing Email</option>
                        <option>Unauthorized Access</option>
                        <option>Website/Application Error</option>
                        <option>Data Loss / Corruption</option>
                        <option>Network Issue</option>
                        <option>Performance Issue</option>
                        <option>Other</option>
                    </select>
                    <div class="invalid-feedback">Please select a category.</div>
                </div>

                <div class="col-md-6">
                    <label for="title" class="form-label required">Title</label>
                    <input type="text" id="title" name="title" class="form-control" placeholder="Short descriptive title" required>
                    <div class="invalid-feedback">Please provide a short title for the report.</div>
                </div>

                <div class="col-12">
                    <label for="description" class="form-label required">Detailed Description</label>
                    <textarea id="description" name="description" class="form-control" rows="4" placeholder="Explain what happened, observed vs expected behavior" required></textarea>
                    <div class="invalid-feedback">Please describe the issue in detail.</div>
                </div>

                <div class="col-md-4">
                    <label for="impact" class="form-label required">Impact Level</label>
                    <select id="impact" name="impact" class="form-select" required>
                        <option value="">Choose...</option>
                        <option>Low</option>
                        <option>Medium</option>
                        <option>High</option>
                        <option>Critical</option>
                    </select>
                    <div class="invalid-feedback">Select an impact level.</div>
                </div>

                <div class="col-md-4">
                    <label class="form-label">Is the issue ongoing?</label>
                    <select id="ongoing" name="ongoing" class="form-select">
                        <option>No</option>
                        <option>Yes</option>
                    </select>
                </div>

                <div class="col-md-4">
                    <label for="whoAffected" class="form-label">Who is affected?</label>
                    <select id="whoAffected" name="whoAffected" class="form-select">
                        <option>Only me</option>
                        <option>Department</option>
                        <option>All users</option>
                        <option>External clients</option>
                    </select>
                </div>

                <div class="col-md-6">
                    <label for="sensitiveData" class="form-label">Was sensitive data involved?</label>
                    <select id="sensitiveData" name="sensitiveData" class="form-select">
                        <option>No</option>
                        <option>Yes</option>
                        <option>Not sure</option>
                    </select>
                </div>

            </div>
        </div>

        <!-- System Environment -->
        <div class="form-section">
            <h5>System Environment</h5>
            <div class="row g-3">
                <div class="col-md-4">
                    <label for="system" class="form-label required">Affected System</label>
                    <select id="system" name="system" class="form-select" required>
                        <option value="">Choose...</option>
                        <option>Website</option>
                        <option>Mobile App (iOS)</option>
                        <option>Mobile App (Android)</option>
                        <option>Internal System</option>
                        <option>Server</option>
                        <option>Network</option>
                        <option>Other</option>
                    </select>
                    <div class="invalid-feedback">Select the affected system.</div>
                </div>

                <div class="col-md-4">
                    <label for="url" class="form-label">URL / System Name</label>
                    <input type="text" id="url" name="url" class="form-control" placeholder="e.g. https://example.com or backend-server-1">
                </div>

                <div class="col-md-4">
                    <label for="device" class="form-label">Device Type</label>
                    <input type="text" id="device" name="device" class="form-control" placeholder="PC / Mac / iPhone / Android">
                </div>

                <div class="col-md-4">
                    <label for="osVersion" class="form-label">Operating System / Version</label>
                    <input type="text" id="osVersion" name="osVersion" class="form-control" placeholder="e.g. Windows 11, macOS 13.4">
                </div>

                <div class="col-md-4">
                    <label for="clientVersion" class="form-label">Browser / App Version</label>
                    <input type="text" id="clientVersion" name="clientVersion" class="form-control" placeholder="e.g. Chrome 120, App v1.3.2">
                </div>

            </div>
        </div>

        <!-- Date & Time -->
        <div class="form-section">
            <h5>Date & Time</h5>
            <div class="row g-3">
                <div class="col-md-6">
                    <label for="occurredAt" class="form-label required">When did the issue occur?</label>
                    <input type="datetime-local" id="occurredAt" name="occurredAt" class="form-control" required>
                    <div class="invalid-feedback">Please provide date and time.</div>
                </div>
                <div class="col-md-6">
                    <label for="firstTime" class="form-label">First time or recurring?</label>
                    <select id="firstTime" name="firstTime" class="form-select">
                        <option>First time</option>
                        <option>Recurring</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Steps to Reproduce -->
        <div class="form-section">
            <h5>Steps to Reproduce</h5>
            <div class="mb-3">
                <label for="steps" class="form-label">Reproduction Steps (numbered)</label>
                <textarea id="steps" name="steps" class="form-control" rows="4" placeholder="1. ... 2. ..."></textarea>
            </div>
            <div class="row g-3">
                <div class="col-md-6">
                    <label for="expected" class="form-label">Expected Result</label>
                    <input id="expected" name="expected" class="form-control">
                </div>
                <div class="col-md-6">
                    <label for="actual" class="form-label">Actual Result</label>
                    <input id="actual" name="actual" class="form-control">
                </div>
            </div>
        </div>

        <!-- Evidence & Attachments -->
        <div class="form-section">
            <h5>Evidence & Attachments</h5>
            <div class="row g-3">
                <div class="col-md-4">
                    <label for="screenshots" class="form-label">Screenshots</label>
                    <input class="form-control" type="file" id="screenshots" name="screenshots[]" accept="image/*" multiple>
                </div>
                <div class="col-md-4">
                    <label for="logs" class="form-label">Log Files</label>
                    <input class="form-control" type="file" id="logs" name="logs[]" accept=".txt,.log,.json,.zip" multiple>
                </div>
                <div class="col-md-4">
                    <label for="video" class="form-label">Video (optional)</label>
                    <input class="form-control" type="file" id="video" name="video" accept="video/*">
                </div>
                <div class="col-12">
                    <label for="errorCode" class="form-label">Error Code / Message</label>
                    <input id="errorCode" name="errorCode" class="form-control" placeholder="If available">
                </div>
            </div>
        </div>

        <!-- Security Specific (hidden unless Security Incident selected) -->
        <div id="securityFields" class="form-section d-none">
            <h5>Security Details</h5>
            <div class="row g-3">
                <div class="col-md-4">
                    <label for="threatType" class="form-label">Type of Threat</label>
                    <select id="threatType" name="threatType" class="form-select">
                        <option>Phishing</option>
                        <option>Malware</option>
                        <option>Suspicious Login</option>
                        <option>Data Exfiltration</option>
                        <option>Other</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label for="source" class="form-label">Source (Email / URL / IP)</label>
                    <input id="source" name="source" class="form-control" placeholder="e.g. phishing@example.com or http://bad.example">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Did you open / click the suspicious content?</label>
                    <select id="clicked" name="clicked" class="form-select">
                        <option>No</option>
                        <option>Yes</option>
                        <option>Not sure</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Has device been disconnected from network?</label>
                    <select id="disconnected" name="disconnected" class="form-select">
                        <option>No</option>
                        <option>Yes</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Reporter Preference & Consent -->
        <div class="form-section">
            <div class="row g-3">
                <div class="col-md-6">
                    <label for="followUp" class="form-label">Preferred follow-up method</label>
                    <select id="followUp" name="followUp" class="form-select">
                        <option>Email</option>
                        <option>Phone</option>
                        <option>No follow-up</option>
                    </select>
                </div>
                <div class="col-md-6 d-flex align-items-end">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="confirm" name="confirm" required>
                        <label class="form-check-label required" for="confirm">I confirm that the information provided is accurate.</label>
                        <div class="invalid-feedback">You must confirm before submitting.</div>
                    </div>
                </div>

                <div class="col-12 mt-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="agreePolicy" name="agreePolicy" required>
                        <label class="form-check-label required" for="agreePolicy">I agree to the company's privacy & security policy.</label>
                        <div class="invalid-feedback">You must accept the policy.</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-between align-items-center">
            <small class="text-muted">You will receive a confirmation email with a reference ID after submission.</small>
            <button class="btn btn-primary" type="submit">Submit Report</button>
        </div>

    </form>
</div>

<!-- Bootstrap Bundle JS (includes Popper) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    // Show/hide security section based on category
    const category = document.getElementById('category');
    const securityFields = document.getElementById('securityFields');
    const anonymous = document.getElementById('anonymous');
    const fullName = document.getElementById('fullName');
    const email = document.getElementById('email');

    function toggleSecurity() {
        if (category.value === 'Security Incident') {
            securityFields.classList.remove('d-none');
        } else {
            securityFields.classList.add('d-none');
        }
    }

    function toggleAnonymous() {
        if (anonymous.checked) {
            fullName.disabled = true;
            email.disabled = true;
            fullName.classList.add('bg-light');
            email.classList.add('bg-light');
        } else {
            fullName.disabled = false;
            email.disabled = false;
            fullName.classList.remove('bg-light');
            email.classList.remove('bg-light');
        }
    }

    category.addEventListener('change', toggleSecurity);
    anonymous.addEventListener('change', toggleAnonymous);

    // Bootstrap validation
    (function () {
        'use strict'
        const form = document.getElementById('reportForm')
        form.addEventListener('submit', function (event) {
            if (!form.checkValidity()) {
                event.preventDefault()
                event.stopPropagation()
            }
            form.classList.add('was-validated')
        }, false)
    })()

    // Initialize state
    toggleSecurity();
    toggleAnonymous();
</script>
</body>
</html>
